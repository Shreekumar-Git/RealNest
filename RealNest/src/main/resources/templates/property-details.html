<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Property Details - Real Estate Platform</title>

    <!-- ‚úÖ Bootstrap 5.3 CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- üå§Ô∏è Light Blue Theme Styling -->
    <style>
      :root {
        --accent: #3b82f6; /* modern blue */
        --accent-light: #60a5fa; /* soft hover blue */
        --bg-main: #f5f7fa; /* light gray-blue background */
        --card-bg: #ffffff; /* white card */
        --text-dark: #1f2937; /* dark gray for text */
      }

      body {
        background-color: var(--bg-main);
        font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        color: var(--text-dark);
        margin: 0;
        padding: 50px 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
      }

      h1 {
        color: var(--accent);
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 20px;
        text-align: center;
      }

      .back-home {
        display: inline-block;
        padding: 10px 18px;
        background-color: var(--accent);
        color: white;
        border-radius: 10px;
        font-weight: 600;
        text-decoration: none;
        box-shadow: 0 6px 16px rgba(59, 130, 246, 0.25);
        transition: background-color 0.3s ease, transform 0.1s;
        margin-bottom: 25px;
      }

      .back-home:hover {
        background-color: var(--accent-light);
        transform: translateY(-2px);
        color: #fff;
      }

      .property-card {
        background-color: var(--card-bg);
        border-radius: 12px;
        box-shadow: 0 6px 24px rgba(0, 0, 0, 0.08);
        padding: 28px;
        max-width: 520px;
        width: 100%;
        text-align: center;
        border: 1px solid rgba(0, 0, 0, 0.05);
      }

      .property-card img {
        width: 100%;
        max-height: 280px;
        object-fit: cover;
        border-radius: 10px;
        margin-bottom: 15px;
      }

      .property-card h2 {
        font-size: 1.4rem;
        color: var(--accent);
        font-weight: 700;
        margin-bottom: 10px;
      }

      .property-card p {
        font-size: 0.95rem;
        color: var(--text-dark);
        margin: 6px 0;
      }

      .property-card strong {
        color: var(--accent);
      }

      @media (max-width: 600px) {
        .property-card {
          padding: 20px;
          border-radius: 10px;
        }
        h1 {
          font-size: 1.6rem;
        }
      }
    </style>
  </head>

  <body>
    <h1>Property Details</h1>

    <!-- ‚úÖ Back Button -->
    <a href="/webpages/" class="back-home">üè† Back to Home</a>

    <!-- üè° Property Card -->
    <div id="property-detail" class="property-card">Loading...</div>

    <!-- ‚úÖ Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      const path = window.location.pathname;
      const id = path.split("/").pop();

      async function loadProperty() {
        try {
          const res = await fetch("/api/properties");
          const properties = await res.json();
          const property = properties.find((p) => p.id == id);
          const container = document.getElementById("property-detail");

          if (property) {
            container.innerHTML = `
            <img src="${
              property.imageUrl ||
              "https://via.placeholder.com/400x250?text=No+Image"
            }" alt="${property.title}">
            <h2>${property.title}</h2>
            <p>${property.description}</p>
            <p><strong>Price:</strong> ‚Çπ${property.price}</p>
            <p><strong>Type:</strong> ${property.type}</p>
            <p><strong>Location:</strong> ${property.location}</p>
            <p><strong>Owner:</strong> ${property.owner.name} (${
              property.owner.email
            })</p>
          `;
          } else {
            container.innerHTML = "<p>Property not found</p>";
          }
        } catch (error) {
          document.getElementById(
            "property-detail"
          ).innerHTML = `<p>Error: ${error.message}</p>`;
        }
      }

      loadProperty();
    </script>
  </body>
</html>
